<div dir="rtl">

# توضیحات Module Federation

**Module Federation** یکی از قابلیت‌های جدید Webpack (از نسخه 5) است که به شما امکان می‌دهد ماژول‌های JavaScript را به‌صورت پویا بین چندین برنامه به اشتراک بگذارید. این ویژگی به‌ویژه برای پروژه‌هایی که از معماری **Micro-Frontend** استفاده می‌کنند، بسیار مفید است.

به زبان ساده:

- هر برنامه یا ماژول می‌تواند به‌عنوان **میزبان (Host)** یا **ارائه‌دهنده (Remote)** عمل کند.
- این ماژول‌ها می‌توانند کد، کتابخانه‌ها یا حتی کامپوننت‌های UI را از یکدیگر به اشتراک بگذارند، بدون اینکه نیازی به بازسازی و انتشار مجدد همه برنامه‌ها باشد.

</div>

---

## ویژگی‌های کلیدی

1. **اشتراک‌گذاری مستقل ماژول‌ها:**  
   می‌توانید بخشی از کد یا کامپوننت را از یک پروژه به پروژه دیگر منتقل کنید، بدون اینکه وابستگی‌های سخت به نسخه‌های خاص داشته باشید.

2. **بارگذاری پویا در زمان اجرا:**  
   به جای اینکه تمام کدهای مورد نیاز در زمان Build به پروژه اضافه شوند، ماژول‌ها تنها زمانی که مورد نیاز هستند از یک منبع خارجی بارگذاری می‌شوند.

3. **مدیریت نسخه‌ها:**  
   با **Module Federation**، Webpack به‌طور خودکار نسخه‌های ماژول‌ها را مدیریت می‌کند تا از مشکلات تداخل نسخه‌ها جلوگیری شود.

---

## اجزای اصلی در Module Federation

برای استفاده از این قابلیت، باید تنظیمات مربوطه را در Webpack انجام دهید. اجزای اصلی این تنظیمات شامل موارد زیر است:

1. **میزبان (Host):**  
   برنامه‌ای که از ماژول‌های دیگر استفاده می‌کند.
2. **ارائه‌دهنده (Remote):**  
   برنامه‌ای که ماژول‌های خود را برای استفاده در اختیار سایرین قرار می‌دهد.

3. **shared:**  
   بخشی که به شما امکان می‌دهد کتابخانه‌های مشترک (مانند React یا lodash) را به اشتراک بگذارید و نسخه‌های آن را مدیریت کنید.

---

## نمونه تنظیمات Webpack

### فایل Webpack ارائه‌دهنده (Remote):

```javascript
const ModuleFederationPlugin = require("webpack/lib/container/ModuleFederationPlugin");

module.exports = {
  plugins: [
    new ModuleFederationPlugin({
      name: "remoteApp",
      filename: "remoteEntry.js",
      exposes: {
        "./Button": "./src/Button", // ارائه دادن کامپوننت Button
      },
      shared: ["react", "react-dom"], // اشتراک‌گذاری کتابخانه‌ها
    }),
  ],
};
```

### فایل Webpack میزبان (Host):

```javascript
const ModuleFederationPlugin = require("webpack/lib/container/ModuleFederationPlugin");

module.exports = {
  plugins: [
    new ModuleFederationPlugin({
      name: "hostApp",
      remotes: {
        remoteApp: "remoteApp@http://localhost:3001/remoteEntry.js", // استفاده از ماژول‌های Remote
      },
      shared: ["react", "react-dom"], // اشتراک‌گذاری کتابخانه‌ها
    }),
  ],
};
```

---

## مزایا

1. **افزایش انعطاف‌پذیری:**  
   برنامه‌ها می‌توانند به‌صورت مستقل توسعه، استقرار و به‌روزرسانی شوند.

2. **کاهش زمان Build:**  
   نیازی نیست کل پروژه را دوباره بسازید.

3. **استفاده در Micro-Frontend:**  
   برای تیم‌هایی که روی پروژه‌های بزرگ و جداگانه کار می‌کنند، بسیار کاربردی است.

4. **همکاری آسان بین تیم‌ها:**  
   هر تیم می‌تواند یک ماژول را ایجاد و ارائه دهد و دیگران از آن استفاده کنند.

---

## کاربردهای رایج

1. **معماری Micro-Frontend:**

   - تقسیم برنامه‌های بزرگ به چند بخش مستقل.
   - اشتراک‌گذاری ماژول‌ها مانند کامپوننت‌های UI.

2. **بهبود سرعت توسعه:**

   - هر تیم می‌تواند بر روی بخش خاصی از پروژه کار کند و تغییرات را بدون نیاز به بازسازی کل پروژه اعمال کند.

3. **مدیریت کتابخانه‌های مشترک:**
   - کتابخانه‌هایی مانند React یا Lodash را به‌صورت مشترک استفاده کنید و از مشکلات تداخل نسخه‌ها جلوگیری کنید.

---

## چالش‌ها

1. **مدیریت وابستگی‌ها:**
   - اگر وابستگی‌های زیادی وجود داشته باشد، ممکن است مشکلاتی در زمان اجرا رخ دهد.
2. **نیاز به هماهنگی:**

   - تیم‌ها باید هماهنگ باشند تا مطمئن شوند ماژول‌های اشتراکی سازگار هستند.

3. **پشتیبانی مرورگرها:**
   - این قابلیت به Webpack 5 وابسته است و نیاز به پشتیبانی مرورگرها از ES Modules دارد.

---
